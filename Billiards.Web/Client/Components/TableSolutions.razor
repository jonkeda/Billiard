@using Billiards.Web.Shared
<div style="width: 100%; height: 100%; position: relative">

    <svg viewBox="@viewbox" preserveAspectRatio="xMidYMid meet"
         style="width: 100%; height: 100%s">
        <g transform="@transform">
            <rect width="2000" height="1000" style="fill: green"/>
            @for (int y = 250; y <= 750; y += 250)
            {
                <line x1="0" y1="@y" x2="2000" y2="@y" style="stroke: lightgreen"/>
            }
            @for (int x = 250; x <= 1750; x += 250)
            {
                <line x1="@x" y1="0" x2="@x" y2="1000" style="stroke: lightgreen"/>
            }
            <rect width="2000" height="1000" style="stroke: brown; stroke-width: 32; fill-opacity: 0;"/>
            @{
                if (problems != null)
                {
                    foreach (Problem problem in problems)
                    {
                        foreach (Solution solution in problem.Solutions)
                        {
                            <polyline points="@solution.PointsAsString()"
                                      style="fill: none; stroke: @problem.Color; stroke-width: 3; stroke-opacity: 0.5"/>
                        }
                    }
                }
                if (balls != null)
                {
                    foreach (var ball in balls)
                    {
                        if (ball.TableAbsolutePoint != null)
                        {
                            <circle cx="@ball.TableAbsolutePoint.X" cy="@ball.TableAbsolutePoint.Y"
                                    r="@ballRadius" fill="@ball.Color"/>
                        }
                    }
                }
            }
        </g>

        Sorry, your browser does not support inline SVG.
    </svg>
</div>
@code {

    public BallCollection? balls { get; set; }
    public ProblemCollection? problems { get; set; }

    public int ballRadius { get; set; }

    public string screenWidthPx { get; set; } = "480px";
    public string screenHeightPx { get; set; } = "270px";

    public string transform { get; set; }
    public string viewbox { get; set; } = "0 0 2000 1000";

}
